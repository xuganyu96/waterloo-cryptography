# Preliminaries
Throughout this survey, we denote vectors by bolded letters $\mathbf{v} \in \mathbb{Z}^n$. While lattices are defined as discrete subgroups over the real, in practice it is easier to exclusively work with integer lattices $\mathcal{L} \subseteq \mathbb{Z}^n$. We also exclusively work with full-rank lattices (whose basis $B \in \mathbb{Z}^{n \times n}$ is non-singular full-rank matrix).

There are a few preliminaries in the mathematics of lattices that are tremendously helpful with understanding the difficulty of hard lattice problems and with the trapdoor constructions based on these hard problems. We will discuss them in this chapter.

## Unimodular relationship
First, we describe how two different basis of the same lattice relate to each other. This relationship plays a crucial role in the construction of the GGH trapdoor because the trapdoor scheme first generates a secret basis, then uses this relationship to generate a public basis of the same lattice.

> Let $\mathcal{L}(B)$ the lattice generated by the column vectors of matrix $B \in \mathbb{Z}^{n \times n}$, then $\mathcal{L}(B_1) = \mathcal{L}(B_2)$ if and only if there exists a unimodular matrix $U \in \mathbb{Z}^{n \times n}$ such that $B_1 = B_2U$

Here a unimodular matrix is a square matrix whose entries are integers and whose determinant is $\pm 1$. In the forward direction, if $B_1, B_2$ generate the same lattice, then each column of $B_1, B_2$ is a lattice point and can be represented using the other basis, which means that there exists integer matrix $U, V$ such that $B_1 = B_2U$ and $B_2 = B_1V$. With simple substitution, we find that $B_1 = B_2U = (B_1V)U$, so $B_1(I - VU) = 1$. Because $B_1$ is non-singular, it necessarily follows that $VU = 1$. By a symmetric argument, we also have $UV = 1$, which means that $V = U^{-1}$. we know $U, V$ to both be integer matrix, so their determinants both necessarily have to be $1$, thus proving that $U, V$ to both be unimodular matrix.

In the backward direction, if $B_1 = B_2U$ for some unimodular matrix $U$, then columns of $B_1$ are already points in the lattice generated by $B_2$, meaning that $\mathcal{L}(B_1) \subseteq \mathcal{L}(B_2)$. Because $U$ is unimodular, we also hve $B_2 = B_1U^{-1}$, where $U^{-1}$ is an integer matrix (in fact $U^{-1}$ is also unimodular), so by a symmetric argument we also have $\mathcal{L}(B_2) \subseteq \mathcal{L}(B_1)$. Therefore, $\mathcal{L}(B_1) = \mathcal{L}(B_2)$. $\blacksquare$

Knowing that two basis generate the same lattice if and only if they are related by a unimodular matrix, it is not hard to deduce that swapping columns, negating a column, and adding to a column an integer linear combination of all other columns all preserve the lattice generated by a matrix because each of the such action can be represented as a right multiplication by a unimodular matrix.

## Orthogonality and determinant
The determinant of a lattice $\mathcal{L}(B)$ generated by a basis $B$ is the determinant of the matrix $B$. Knowing that two basis generate the same lattice if and only if they are related by a unimodular matrix (whose determinant is 1), it is not hard to see that the determinant is the same regardless of choice of basis. We can thus define the "determinant of a lattice" $\det(\mathcal{L})$ as an invariant of the lattice regardless of the choice of basis.

The determinant of a lattice can be geometrically interpreted as the "n-dimensional volume" of the fundamental parallelpiped, which is defined as a subset of $\mathbb{R}^n$:

$$
P(B) = B\cdot [0, 1)^n = \{\sum_{i=1}^n x_i\mathbf{b_i} \mid 0\leq x < 1 \}
$$

Note that it is often more convenient to "center" the fundamental parallelpiped around $\mathbf{0}$ and define it as $P(B) = B\cdot [-\frac{1}{2}, \frac{1}{2})^n$.

On the other hand, we are also concerned with "how orthogonal" the basis is. For that we define the orthogonality defect:

$$
\mathop{\text{ortho-defect}} = \frac{\prod_{i=1}^n \Vert \mathbf{b}_i \Vert}{\vert\det(B)\vert}
$$

Observe that if $B$ is also an orthogonal matrix whose columns are pair-wise orthogonal, then $\text{ortho-defect}(B) = 1$. Otherwise, the orthogonality defect of $B$ will be greater than 1. Geometrically, a greater orthogonality defect corresponds to a basis that is more "skewed".

Intuitively it is not hard to imagine that, for a fundamental parallelpiped with a fixed n-dimensional volume, the more skewed the basis is, the longer each basis will have to be to preserve the n-dimensional volume, and the further away the basis is from the origin. This is the principal observation on the hardness of the shortset vector problems and their siblings (such as the closest vector problem used in GGH's construction): **the longer, more skewed a basis is, the harder it is to find a short vector in the lattice**. It turns out that the gap in difficult of finding short vector between good (short, orthogonal) basis and bad (long, skewed) basis is exponential, and thus hard lattice problems pose provide an excellent foundation to build trapdoor functions on.